...
2020-11-3
问题：
1.文件夹删除功能
    调用的是文件的dao,记得改成文件的service

2020-11-4
任务：做上传下载功能

返回头消息的文件名：headerFileName  xxx.zip
临时文件中压缩文件的文件类：zipFileName  D:\graduation project\ofms\Tmpe\xxx.zip

2020-11-6
任务：文件的删除，文件夹和文件的查询

构思分发共享机制和实现
   部门 == 文件夹   D:\graduation project\ofms\18877165120\研发部（部门）

   查询 部门-用户表 向部门成员的的 文件管理 菜单中显示 部门文件连接


    首先：
        新建：新建部门，部门表加一条记录 ，目录表也加上部门对于的根目录，目录的主键是部门表中的外键，
        显示：”文件管理“中可以显示新建的部门---》实现方案：查询部门表，获得部门List,each输出到菜单中，并且每个部门选项，可以点击，请求是每个部门中的文件夹
             “成员管理”中也显示所有用户的部门---》实现方案：查询部门表，。。。。，每个部门选项，可以点击，请求是每个部门对应的成员信息（从部门-用户表中查出）

        解散部门：很简单，和删除文件夹差不多

        分发共享：
            机制：通过手机号码或邮件邀请其他用户（类型只能是”个人用户“），...接受邀请（还没想好）....，部门中的成员可以 看到该部门的文件夹中的内容，成员可以上传、下载、预览，但是没有删除权限

今晚：
    拆分静态页面的布局，增加复用性、解耦...


2020-11-7
任务：部门的新建  和  删除

解散部门：
    处理：
       1.部门的文件
       2.部门成员------->成员添加---->成员删除----->成员编辑
       3.部门表记录          ^
                           |
                           |
                        个人账户---->个人账户登录---->个人账户页面


2020-11-9
任务：部门成员的显示

2020-11-10
任务：部门成员的添加、移除、编辑

成员添加：通过“手机号”邀请，从根据手机号从用户表中查找，获得用户信息，根据部门查找部门的文件夹信息，最后调用对应的插入dao，插入表记录（被邀请用户确认）
移除：。。。。
编辑：。。。。

2020-11-15
任务：部门的编辑和用户的编辑

     待分配页面设计

     问题：springMVC pojo传参 当value为0时,POJO值为null
2020-11-16
任务：分析系统进度

    系统功能：
        存储管理：
           文件:
                显示：
                文件上传（已完成）
                文件下载（已完成）
                文件删除（已完成）
           文件夹:
                显示：
                新建文件夹（已完成）
                删除文件夹（已完成）
                下载文件夹（已完成）
           搜索：
                搜索根文件下的符合关键词的文件夹或文件（问题：....）
        分发共享：
           部门:
               显示：
               新建部门
               解散部门
               编辑部门
           成员:
               显示：
               新增成员
               移除部门中的成员
               编辑成员信息
           共享功能：加入该部门的成员（个人账号），在文件管理中的出现该部门的文件柜连接，可以并且根据权限对文件和文件夹操作
           待分配：从部门中移除的成员，自动被分配到待分配。
               搜索：
               编辑：
               删除:
        在线预览：
           通过网络获得技术支持
        权限控制：
           认证:
           授权:

2020-11-17
任务：在线预览

2020-11-19
任务：权限管理设置

权限关联  上传、下载、预览

2020-11-20
完成权限管理

2020-11-22
团队账号界面：
    待分配页面
        具体实现方案：
            显示：
                后端：成员表中的待分配人员信息（如何表示：
                    加上一个字段status
                    dept_id 不为null 且 status 为 1,则才算是属于该部门的成员，
                    从部门中移除一个成员，设置status 为 0，部门不置null
                    那么待分配的成员可以用status为0表示

                    那么成员管理中我要改：
                        显示成员 ：查询条件为 where deptId = ? and stutus = 1
                        添加成员 ：stutus = 1
                        编辑成员 ：
                        移除 ： 设置 status = 0
                    ）侧待分配成员查询:先查询团队账号的部门，然后根据部门id去部门成员表查询所有status=0的成员
                前端：用户、邮箱/手机号、操作，
            搜索：
                后端：搜索字段 （userName）或（手机号），前端加个select标签表明搜索框中输入的时userName还是手机号码
                    传入后端时根据判断调用方法， 1 是userNamme,2是手机号码，
                前端：返回一个成员信息
            编辑：
                后端：在编辑里，可以分配成员的部门，以及可以分配的空间。所以我得知道我有什么部门，和具体部门的存储空间
                    简而言之，就是点击编辑的时候，需要后端返回我的所有的部门信息。在前端编辑好后保存，把信息传给后端，
                    传入的信息有，部门id、成员id、分配的空间，后端根据这些信息修改 成员表
                前端：编辑框是下拉框，下拉选择分配给某个部门，选好部门后，可分配空间框旁边显示部门现可用空间，输入要数组要在
                    可用空间的范围内，否则不能’确定‘保存（jq来做输入限制，后端再做校验）。
            删除：
                前端：点击‘删除’，直接删除成员，之后只能通过手机号再次添加该成员。数据：传入一个id给后端
                后端：后端用户id值直接删除表中对应的成员记录

修改成员表：增加一个字段；
    需要修改：
        表
        mapper
        entity

2020-11-23
    待分配页面：编辑、搜索

2020-11-25

    登录：账号和用户存在一个表中，且管理员的等级为0

    账号管理：
        删除：
            前端：
                请求:'\deleteUser' 参数：userId
            后端：
                控制层 'deleteUser(Integer userId)'     reutrn 'OK' OR return 'FALSE'
        编辑:
            前端：
                请求:'\editUser' 参数：分配给账号的总内存（maxSpace）
            后端：
                控制层 'editUser(Integer maxSpace)'     reutrn 'OK' OR return 'FALSE'
        搜索:
            前端：jq控制input的data-centent属性
                请求:'\searchUser' 参数：用户名（userName） 或者 用户的手机号码（phone:18877165120）
            后端：
                控制层 'searchUser(Integer searchType,String userName,Integer phone)' return 'adminstration'

        批量删除:
            前端：使用ajax,传json ，RequestParam(value="userId[]")Integer userId[])
                请求:'\batchDelete' 参数：一个包含userId的数组
            后端：
                控制层 'batchDelete(RequestParam(value="userId[]")Integer userId[]))'   reutrn 'OK' OR return 'FALSE'

                        取地板值
        int ------>B------>KB
                   | \
                   |  \
                   GB    MB   保留两位小数
                   保留两位小数



           一、上传文件时，计算大小，写入file数据表，读出时不用计算，但是不能更新用户存储空间。 String show_size, int file_size
           二、用户已用空间+file.size,
           三、


2020/12/3
    部门自己独自的存储空间。显示问题：‘我的文件’
    新建用户时应该把为我的文件创建一个部门，加个type = 0 字段和团队部门区分开来
    读取的时候
        读取部门 userid 且 type = 1的部门


2020/12/3
    空间分配规则。。。。

    用户总空间>文件柜>成员

    用户总空间：分配/创建文件柜空间时更新已用空间
    文件柜：给成员分配空间 or 自己上传空间时更新空间
    成员：成员上传文件时更新空间  



1.修改空间变量类型为BigInteger
4.完成系统空间显示方案
2.完善部门、成员编辑功能
       部门编辑
           显示：最小单位GB （单位转换，字节--》GB）
           限制输入：只能输入整数,不能小于已使用空间，不能大于最大空间   -其他所有符号都要禁止
       成员编辑
           有两种单位：MB 和 GB
           限制输入：只能输入整数,不能小于已使用空间，不能大于最大空间
4.完善系统空间分配机制
3.完善成员最近访问时间

th:text="${(#numbers.formatDecimal((((member.usedSpace.doubleValue()/1024)/1024)/1024),1,'COMMA',2,'POINT'))}+'GB'"
th:text="${(#numbers.formatDecimal((((member.maxSpace.doubleValue()/1024)/1024)/1024),1,'COMMA',2,'POINT'))}+'GB'"


    文件剩余空间不足1024MB

解散部门：
    解散文件柜
    解散成员
    删除文件
    删除文件夹


